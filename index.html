<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- Disable cache for GitHub Pages testing -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<title>8-Bit Gravity Shooter</title>

<style>
  body {
    margin: 0;
    background: black;
    color: white;
    font-family: monospace;
    text-align: center;
  }
  canvas {
    display: block;
    margin: 20px auto;
    border: 4px solid white;
    background: black;
  }
</style>
</head>

<body>
<h1>8-Bit Gravity Shooter</h1>
<p>Arrow keys = thrust Â· Space = fire</p>

<canvas id="game" width="512" height="512"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* ========= INPUT ========= */
const keys = {};
addEventListener("keydown", e => keys[e.key] = true);
addEventListener("keyup", e => keys[e.key] = false);

/* ========= HELPERS ========= */
function wrap(o) {
  if (o.x < 0) o.x += 512;
  if (o.x > 512) o.x -= 512;
  if (o.y < 0) o.y += 512;
  if (o.y > 512) o.y -= 512;
}

/* ========= GAME STATE ========= */
let score = 0;
let lives = 3;

const star = { x: 256, y: 256 };

const ship = {
  x: 256,
  y: 400,
  vx: 0,
  vy: 0,
  cooldown: 0
};

const asteroids = [];
for (let i = 0; i < 6; i++) {
  asteroids.push({
    x: Math.random() * 512,
    y: Math.random() * 512,
    vx: (Math.random() - 0.5) * 1.2,
    vy: (Math.random() - 0.5) * 1.2,
    r: 18
  });
}

const bullets = [];

/* ========= SAFE GRAVITY ========= */
function gravity(o) {
  const dx = star.x - o.x;
  const dy = star.y - o.y;
  const d = Math.sqrt(dx*dx + dy*dy);

  if (d < 40 || d > 400) return;

  const force = 0.035;
  o.vx += (dx / d) * force;
  o.vy += (dy / d) * force;
}

/* ========= MAIN LOOP ========= */
function loop() {
  ctx.setTransform(1,0,0,1,0,0);
  ctx.fillStyle = "black";
  ctx.fillRect(0,0,512,512);

  /* HUD */
  ctx.fillStyle = "white";
  ctx.font = "14px monospace";
  ctx.fillText("SCORE: " + score, 10, 20);
  ctx.fillText("LIVES: " + lives, 420, 20);

  /* INPUT */
  if (keys["ArrowUp"])    ship.vy -= 0.15;
  if (keys["ArrowDown"])  ship.vy += 0.15;
  if (keys["ArrowLeft"])  ship.vx -= 0.15;
  if (keys["ArrowRight"]) ship.vx += 0.15;

  if (keys[" "] &&
