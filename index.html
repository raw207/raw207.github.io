<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>8-Bit Gravity Game</title>

<style>
  body {
    margin: 0;
    background: black;
    color: white;
    font-family: monospace;
    text-align: center;
  }
  canvas {
    display: block;
    margin: 20px auto;
    border: 4px solid white;
    background: black;
  }
</style>
</head>

<body>
<h1>8-Bit Gravity Test</h1>
<p>Arrow keys: rotate / thrust</p>

<canvas id="game" width="512" height="512"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* ================== INPUT ================== */

const keys = {};
addEventListener("keydown", e => keys[e.key] = true);
addEventListener("keyup",   e => keys[e.key] = false);

/* ================== HELPERS ================= */

function wrap(o) {
  if (o.x < 0) o.x += 512;
  if (o.x > 512) o.x -= 512;
  if (o.y < 0) o.y += 512;
  if (o.y > 512) o.y -= 512;
}

function finite(n) {
  return Number.isFinite(n);
}

/* ================== WORLD =================== */

const star = { x:256, y:256 };

const ship = {
  x: 100,
  y: 100,
  vx: 0,
  vy: 0,
  angle: 0
};

const asteroids = [];
for (let i = 0; i < 5; i++) {
  asteroids.push({
    x: Math.random()*512,
    y: Math.random()*512,
    vx: (Math.random()-0.5)*1.2,
    vy: (Math.random()-0.5)*1.2,
    r: 18
  })
